<h1>16. Функции</h1>

<p>Итак, теперь вы хорошо знакомы с Python и точно знаете его основы. Ранее вы познакомились с переменными и их видами, узнали об операторах и методах, постигли дзен и магию Python. Теперь настало время постигнуть новый виток развития в программировании. И скоро вы научитесь создавать и управлять собственными структурами языка. </p>

<h2>Что такое функция?</h2>

<p>Повторим ранее пройденный материал:</p>

<blockquote>
    <p>Функция — это именованный кусок кода, который принимает какие-либо параметры, и возвращает какие-либо значения.</p>
</blockquote>

<p>Проще говоря, функция - это пользовательский оператор языка. Однако если раньше функции нами рассматривались с точки зрения их использования, то сейчас мы будем рассматривать их внутреннее устройство.</p>

<h2>Зачем нужны функции?</h2>

<p>Функции нужны для того, чтобы как можно больше снизить повторяемость кода в программе, т.е. для того, чтобы можно было не писать один и тот же блок кода несколько раз. Однако при этом, функции могут создаваться с различными целями. В основном, их лишь две:</p>

<ul>
    <li>Создание функций для какого-либо конкретного проекта.</li>
    <li>Создание общих функций для множества проектов.</li>
</ul>

<p>Часто, такие общие функции со схожими задачами объединяют в один файл. Такие файлы называют библиотеками. А некоторые библиотеки даже специально постоянно разрабатываются и поддерживаются большой группой разработчиков. Такие библиотеки используются большим количеством проектов и поэтому крайне важны.</p>

<p>Крайней же степенью подхода неповторимости кода может служить принцип DRY ( Don&#39;t Repeat Yourself / не повторяйся ). Однако даже без него, функции необходимы для большего удобства и создания слоя абстракции.</p>

<h2>Понятие абстракции</h2>

<p>Сначала, как всегда, определение.</p>

<blockquote>
    <p>Абстракция - это упрощение / обобщение некоторых действий для их дальнейшего использования. Также абстракция - это описание чего-либо на более высоком уровне.</p>
</blockquote>

<p>Простой пример - предположим, что функция "ходить" - это абстракция. Тогда её составляющими будут такие действия как "поднять ногу", "переместить ногу", "опустить ногу", "повторить". А у каждой из этих функций также есть свои составляющие, скажем работа мышц ноги, и так далее, в глубину.</p>

<p>Собственно суть абстракции ( в этом случае ) - это описание чего-либо, что подразумевает под собой какой-либо алгоритм действий. Например, говоря фразу "открыть входную дверь", мы подразумеваем такие действия как "вставить ключ в замок и повернуть его", "повернуть ручку двери", "потянуть дверь за ручку на себя" и так далее. Абстракция позволяет не описывать всё это, а дать лишь общее указание.</p>

<p>И даже в программировании это работает очень схожим образом. Предположим, что вы создаёте какую-либо игру в которой есть персонаж игрока. Для управления его действиями можно каждый раз их прописывать целиком и полностью. А можно просто создать нужные функции, например, walk() и jump(), а затем использовать их в нужных местах. Такие функции как раз и называют слоем абстракции ( упрощения ).</p>

<p>Причём подобный слой абстракции может использоваться где угодно, что сильно упрощает процесс создания программ.</p>

<blockquote>
    <p>Справка: На самом деле, на этом принципе устроено вообще всё программирование в мире. Один язык программирования создаётся на другом, одни функции строятся на других, одни программы основываются на других. И чем дальше находится звено этой цепи, чем выше слой абстракции, тем больше возможностей, но тем они проще, ибо все детали "спрятаны" ниже.</p>
</blockquote>

<h2>Синтаксис</h2>

<p>Собственно функция пишется следующим образом:</p>

<pre><code><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">name_function</span><span class="hljs-params">(input)</span></span>:
    body_function
</code></pre>

<p>В данном примере псевдокода:</p>

<ul>
    <li><code>def</code> - зарезервированное слово, объявляющее функцию</li>
    <li><code>name_function</code> - это название функции, по которому она будет вызываться</li>
    <li><code>input</code> - это объявляемые вводимые параметры функции, они могут быть обязательными и дополнительными</li>
    <li><code>body_function</code> - это тело функции, то есть некий алгоритм, который и выполняет функция, при этом не имеет значения, возвращает она что-нибудь или нет</li>
</ul>

<p>Самый простой пример функции - это пустая ( ничего не делающая ) функция:</p>

<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty_function</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-keyword">pass</span>
</code></pre>

<p>С точки зрения языка, такая функция уже более чем верна, хотя она и ничего не делает.</p>

<h2>Приём параметров и возврат значений</h2>

<p>Теперь поближе познакомимся с тем, что даёт функциям такую мощь, а именно - ввод и вывод данных.</p>

<h3>Параметры функции</h3>

<p>Ввод данных в функцию производится при помощи параметров, что давно уже вам известно. Однако теперь разберёмся не с их использованиям, а с их объявлением. Для этого разберём четыре примера казалось бы одной и той же функции, которая принимает какое-либо число и выводит его в консоль.</p>

<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_int_v1</span><span class="hljs-params">(input_int = <span class="hljs-number">0</span>)</span>:</span>
    print(input_int)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_int_v2</span><span class="hljs-params">(input_int)</span>:</span>
    print(input_int)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_int_v3</span><span class="hljs-params">(input_int:int = <span class="hljs-number">0</span>)</span>:</span>
    print(input_int)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_int_v4</span><span class="hljs-params">(input_int:int)</span>:</span>
    print(input_int)
</code></pre>

<p>Итак, теперь разберём их по порядку. Полезная нагрузка у всех функций одинаковая - просто вывод числа в консоль. Однако, у каждой функции её параметр объявлен по своему.</p>

<p>В первом случае параметр считается необязательным, его можно не указывать вовсе. Ибо в таком случае ( если параметр функции не задан явно ) будет подставлено его значение по умолчанию ( в данном примере это 0 ).</p>

<p>Во втором случае параметр считается обязательным ( поскольку значение по умолчанию не задано ), а если попытаться вызвать такую функцию без параметров, то Python выдаст ошибку <code>TypeError: print_int_v2() missing 1 required positional argument: &#39;input_int&#39;</code> ( отсутствует аргумент &#39;input_int&#39; ).</p>

<p>В чём же тогда отличие третьего и четвёртого вариантов от первого и второго соответственно? А отличие тут в явном указании типа переменной, что с одной стороны даст прирост в скорости, а с другой - защиту от дурака. И хотя Python всё равно попробует принять и иной тип данных, IDE укажет на такую ошибку.</p>

<h3>Возврат значений</h3>

<p>Функция может возвращать какие-либо значения при помощи оператора <code>return</code>. В последствии, возвращённое функцией значение можно как-либо использовать.</p>

<p>Например:</p>

<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_func</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>

print(test_func())
</code></pre>

<p>Результатом выполнения данного кода будет обычная единица.</p>

<h2>Пример более сложной функции</h2>

<pre><code class="lang-python">def body_mass_index(height:<span class="hljs-keyword">int</span>, mass:<span class="hljs-keyword">int</span>):
    <span class="hljs-keyword">if</span> ( (type(height) == <span class="hljs-keyword">int</span>) and (type(mass) == <span class="hljs-keyword">int</span>)):
        bmi = (mass) / ( ( height / 100 ) ** 2 )
        <span class="hljs-keyword">return</span> bmi
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> 'Type <span class="hljs-keyword">error</span>'
</code></pre>

<p>Данная функция решает прикладную задачу - вычисляет массу тела, на основании двух параметров - <code>height</code> ( высота человека, в сантиметрах ) и <code>mass</code> ( масса человека, в килограммах ). После запуска функция сначала проверяет тип внесённых переменных ( при помощи оператора <code>type()</code> ), и в случае, если тип данных это <code>int</code> ( т.е. целое число ), производит вычисления и возвращает ответ. В противном случае функция возвращает сообщение об ошибке.</p>
